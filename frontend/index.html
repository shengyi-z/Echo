<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Echo Frontend</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            margin: 2rem;
        }

        input,
        button {
            padding: 0.5rem;
            margin: 0.25rem;
        }

        .row {
            margin-bottom: 1rem;
        }

        pre {
            background: #f6f8fa;
            padding: 1rem;
            border-radius: 6px;
        }
    </style>
</head>

<body>
    <h1>Echo Frontend</h1>
    <div class="row">
        <input id="title" placeholder="Task title" />
        <input id="desc" placeholder="Description" />
        <input id="uid" placeholder="User ID" />
        <button id="create">Create Task</button>
    </div>
    <div class="row">
        <button id="list">List Tasks</button>
    </div>
    <pre id="out"></pre>
    <script>
        const out = document.getElementById('out');
        const api = (path) => `http://localhost:8000${path}`;

        document.getElementById('create').onclick = async () => {
            const payload = {
                title: document.getElementById('title').value || 'Untitled',
                description: document.getElementById('desc').value || null,
                user_id: document.getElementById('uid').value || 'u1',
            };
            const resp = await fetch(api('/tasks'), {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload),
            });
            out.textContent = await resp.text();
        };

        document.getElementById('list').onclick = async () => {
            const resp = await fetch(api('/tasks'));
            out.textContent = await resp.text();
        };
    </script>
</body>

</html>